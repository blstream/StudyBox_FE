<div layout="row" layout-xs="column">

    <md-autocomplete
            flex="30"
            ng-model="deckPreview.searchText"
            md-input-name="deckField"
            md-selected-item="deckPreview.selectedItem"
            md-search-text="deckPreview.searchText"
            md-items="item in deckPreview.getDecks(deckPreview.searchText)"
            md-item-text="item.name"
            md-search-text-change="deckPreview.getDecks(deckPreview.searchText)"
            md-selected-item-change="deckPreview.selectDeck(item)"
            md-min-length="0"
            md-input-maxlength="50"
            md-autoselect="true"
            md-floating-label="{{'deck-TYPE_NAME' | translate}}">
      <md-item-template>
        <span md-highlight-text="deckPreview.searchText">{{item.name}}</span>
      </md-item-template>
    </md-autocomplete>
    <div ng-if="deckPreview.searchText" ng-click="deckPreview.clear()" class="deck-clear">x</div>
</div>


<div layout="horizontal" layout-wrap>
  <div ng-repeat="card in deckPreview.cards" flex-xs="100" flex-sm="50" flex="33">
    <md-card ng-click="deckPreview.selectCard(card)"
             class="deck-card"
             ng-class="{'md-whiteframe-15dp': hover, 'md-whiteframe-8dp': card.id === deckPreview.selectedCardId}"
             ng-mouseenter="hover = true" ng-mouseleave="hover = false">

      <md-card-title>
        <md-card-title-text class="deck-content">

          <span class="md-headline">{{ card.question }}</span>

          <div id="{{ card.id }}" ng-show="deckPreview.toggledHints == card.id">
            <p ng-repeat="hint in deckPreview.hints">
              <i class="md-subhead">{{ hint }}</i>
            </p>
          </div>

          <span class="md-subhead">{{ card.answer }}</span>

          <md-button class="show-tips-button"
                     ng-click="deckPreview.toggleHints(card.id)"
                     aria-label="...">
            <md-icon ng-show="deckPreview.toggledHints !== card.id"
                     md-svg-src="assets/icons/expand_more.svg" style="display:inline">
            </md-icon>

            <md-icon ng-show="deckPreview.toggledHints === card.id"
                     md-svg-src="assets/icons/expand_less.svg" style="display:inline">
            </md-icon>
          </md-button>

        </md-card-title-text>
      </md-card-title>

    </md-card>
  </div>
</div>
